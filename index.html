<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yarn Dye Studio Manager</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.5;
        }
        .min-h-screen { min-height: 100vh; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .bg-gray-50 { background-color: #f9fafb; }
        .bg-white { background-color: #ffffff; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-700 { color: #374151; }
        .text-gray-900 { color: #111827; }
        .text-purple-600 { color: #9333ea; }
        .bg-purple-600 { background-color: #9333ea; }
        .text-white { color: #ffffff; }
        .rounded-lg { border-radius: 0.5rem; }
        .p-8 { padding: 2rem; }
        .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mt-6 { margin-top: 1.5rem; }
        .text-center { text-center; }
        .text-3xl { font-size: 1.875rem; }
        .text-sm { font-size: 0.875rem; }
        .font-bold { font-weight: 700; }
        .font-medium { font-weight: 500; }
        .w-full { width: 100%; }
        .max-w-md { max-width: 28rem; }
        .border { border: 1px solid #e5e7eb; }
        .bg-red-50 { background-color: #fef2f2; }
        .text-red-700 { color: #b91c1c; }
        .bg-blue-50 { background-color: #eff6ff; }
        .text-blue-800 { color: #1e40af; }
        .text-xs { font-size: 0.75rem; }
        .text-blue-600 { color: #2563eb; }
        input:focus, button:focus { outline: 2px solid #9333ea; outline-offset: 2px; }
        .card-shadow { box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        button:hover { opacity: 0.9; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .block { display: block; }
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .h-12 { height: 3rem; }
        .w-12 { width: 3rem; }
        .border-b-2 { border-bottom-width: 2px; }
        .border-purple-600 { border-color: #9333ea; }
        .rounded-full { border-radius: 9999px; }
        .mx-auto { margin-left: auto; margin-right: auto; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // PASSWORD CONFIGURATION - Change this to your desired password
        const APP_PASSWORD = "dyestudio2026";

        // Initialize Supabase
        const supabase = window.supabase.createClient(
            'https://hqjuyceebdujenrrtoth.supabase.co',
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhxanV5Y2VlYmR1amVucnJ0b3RoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA1NjI0MzgsImV4cCI6MjA4NjEzODQzOH0.JH7smh8TBaQ8QdLvFrqsuR2v04N2Ks-JZnydXOWVu2w'
        );

        // Fixed user ID for all data (no authentication required)
        const USER_ID = 'default-user';

        // Password Screen Component
        function PasswordScreen({ onAuthenticated }) {
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');

            const handleSubmit = (e) => {
                e.preventDefault();
                if (password === APP_PASSWORD) {
                    sessionStorage.setItem('dyestudio_auth', 'true');
                    onAuthenticated();
                } else {
                    setError('Incorrect password');
                    setPassword('');
                }
            };

            return (
                <div className="min-h-screen flex items-center justify-center bg-gray-50">
                    <div className="max-w-md w-full">
                        <div className="bg-white rounded-lg card-shadow p-8">
                            <div className="text-center mb-8">
                                <h1 className="text-3xl font-bold text-gray-900 mb-2">ðŸ§¶ Yarn Dye Studio</h1>
                                <p className="text-gray-600">Enter password to access your workspace</p>
                            </div>

                            <form onSubmit={handleSubmit} className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">
                                        Password
                                    </label>
                                    <input
                                        type="password"
                                        required
                                        value={password}
                                        onChange={(e) => {
                                            setPassword(e.target.value);
                                            setError('');
                                        }}
                                        className="w-full px-3 py-2 border rounded-lg"
                                        placeholder="Enter password"
                                        autoFocus
                                    />
                                </div>

                                {error && (
                                    <div className="px-3 py-2 rounded-lg text-sm bg-red-50 text-red-700">
                                        {error}
                                    </div>
                                )}

                                <button
                                    type="submit"
                                    className="w-full bg-purple-600 text-white px-6 py-3 rounded-lg font-medium"
                                >
                                    Access App
                                </button>
                            </form>

                            <div className="mt-6 px-3 py-2 bg-blue-50 rounded-lg">
                                <p className="text-sm text-blue-800">
                                    <strong>Password:</strong> dyestudio2026
                                    <br />
                                    <span className="text-xs text-blue-600">Change this in the code (line 90)</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // App Wrapper with Password Protection
        function App() {
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                const auth = sessionStorage.getItem('dyestudio_auth');
                if (auth === 'true') {
                    setIsAuthenticated(true);
                }
                setLoading(false);
            }, []);

            if (loading) {
                return (
                    <div className="min-h-screen flex items-center justify-center bg-gray-50">
                        <div className="text-center">
                            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"></div>
                            <p className="text-gray-600">Loading...</p>
                        </div>
                    </div>
                );
            }

            if (!isAuthenticated) {
                return <PasswordScreen onAuthenticated={() => setIsAuthenticated(true)} />;
            }

            return <div className="text-center" style={{padding: '50px'}}>
                <h1 style={{fontSize: '24px', marginBottom: '20px'}}>âœ… Password Test Successful!</h1>
                <p>If you see this, the password system is working.</p>
                <p style={{marginTop: '10px'}}>Your data will sync across devices via Supabase.</p>
                <button 
                    onClick={() => {
                        sessionStorage.removeItem('dyestudio_auth');
                        window.location.reload();
                    }}
                    style={{
                        marginTop: '20px',
                        padding: '10px 20px',
                        background: '#9333ea',
                        color: 'white',
                        border: 'none',
                        borderRadius: '8px',
                        cursor: 'pointer'
                    }}
                >
                    Sign Out (Test)
                </button>
            </div>;
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
